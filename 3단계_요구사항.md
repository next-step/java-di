# π€ 3λ‹¨κ³„ - @Configuration κµ¬ν„ν•κΈ°

# **λ―Έμ… μ„¤λ…**

ν„μ¬ dao ν΄λμ¤λ” λ°μ΄ν„°λ² μ΄μ¤κ°€ μ•„λ‹ Mapμ„ μ‚¬μ©ν•μ—¬ μ €μ¥ν•κ³  μλ‹¤.

μΌλ°μ μΈ μ›Ή μ„λΉ„μ¤λ” λ°μ΄ν„°λ¥Ό λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•λ‹¤.

μ¶”ν›„μ— λ°μ΄ν„°λ² μ΄μ¤μ— μ—°κ²°ν•  μ μλ„λ΅ javax.sql.DataSourceλ΅ λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ • μ •λ³΄λ¥Ό κ΄€λ¦¬ν•μ.

λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ • μ •λ³΄λ¥Ό ν•λ“ μ½”λ”©ν•λ©΄ κ΄€λ¦¬κ°€ μ–΄λ ¤μ°λ‹ @Configuration κΈ°λ¥μ„ μ¶”κ°€ν•μ—¬ λΉ μΈμ¤ν„΄μ¤λ΅ κ΄€λ¦¬ν•  μ μλ„λ΅ λ§λ“ λ‹¤.

λ°μ΄ν„°λ² μ΄μ¤λ” μ„μ‹λ΅ h2λ¥Ό μ‚¬μ©ν•λ‹¤. λ‚μ¤‘μ— λ°μ΄ν„°λ² μ΄μ¤λ¥Ό λ³€κ²½ν•κ² λλ‹¤λ©΄ λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ • μ •λ³΄λ¥Ό λ‹΄λ‹Ήν•λ” λΉμ„ μμ •ν•λ©΄ λλ‹¤.

## **μ”κµ¬μ‚¬ν•­**

- λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ •μ„ κ΄€λ¦¬ν•λ” μ±…μ„μ„ λ§΅μ€ λΉμ„ μƒμ„±ν•κΈ° μ„ν•΄ @Configurationμ„ μ¶”κ°€ν•μ. κ° λ©”μ†λ“μ—μ„ μƒμ„±ν•λ” μΈμ¤ν„΄μ¤κ°€ BeanFactoryμ— λΉμΌλ΅ λ“±λ΅ν•λΌλ” μ„¤μ •μ€ @BeanμΌλ΅ ν•λ‹¤.
- BeanScannerμ—μ„ μ‚¬μ©ν•  κΈ°λ³Έ ν¨ν‚¤μ§€μ— λ€ν• μ„¤μ •μ„ ν•λ“μ½”λ”©ν–λ”λ° @ComponentScanμΌλ΅ ν¨ν‚¤μ§€ κ²½λ΅λ¥Ό μ„¤μ •ν•  μ μλ„λ΅ μ§€μ›ν•μ.
- @Configuration μ„¤μ • νμΌμ„ ν†µν•΄ λ“±λ΅ν• λΉκ³Ό BeanScannerλ¥Ό ν†µν•΄ λ“±λ΅ν• λΉ κ°„μ—λ„ DIκ°€ κ°€λ¥ν•΄μ•Ό ν•λ‹¤.

### **@Configuration μμ **

```java
import org.h2.jdbcx.JdbcDataSource;
import javax.sql.DataSource;

@Configuration
@ComponentScan({ "camp.nextstep", "com.interface21" })
public class MyConfiguration {

    @Bean
    public DataSource dataSource() {
        final var jdbcDataSource = new JdbcDataSource();
        jdbcDataSource.setUrl("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;");
        jdbcDataSource.setUser("");
        jdbcDataSource.setPassword("");
        return jdbcDataSource;
    }

    @Bean
    public JdbcTemplate jdbcTemplate(final DataSource dataSource) {
        return new JdbcTemplate(dataSource);
    }
}
```

---
## μ”κµ¬μ‚¬ν•­ μ •λ¦¬

1. DataSource λ΅ λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ • μ •λ³΄λ¥Ό κ΄€λ¦¬ν•λ‹¤.
   - [x] DataSource λΉμ΄ μƒμ„±λ  μ μλ„λ΅ μμ  μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤
   - [x] JdbcTemplate λΉμ΄ μƒμ„±λ  μ μλ„λ΅ μμ  μ‘μ„±ν•λ‹¤
2. @ComponentScan μΌλ΅ ν¨ν‚¤μ§€ κ²½λ΅λ¥Ό μ„¤μ •ν•  μ μλ„λ΅ μ§€μ›ν•λ‹¤
   - [ ] @ComponentScan μ• λ…Έν…μ΄μ…μ basePackages κ°’μ„ μ΅°νν• λ’¤ λ¦¬ν”λ ‰μ…μΌλ΅ ν΄λμ¤λ“¤μ„ μ΅°νν•λ‹¤
   - [ ] BeanScanner μ—μ„λ„ μ΅°νν• basePackages λ¥Ό μ‚¬μ©ν•  μ μλ„λ΅ λ¦¬ν©ν† λ§ν•λ‹¤ 
3. @Configuration μ„¤μ •νμΌμ„ ν†µν•΄ λΉμ„ λ“±λ΅ν•  μ μμ–΄μ•Όν•λ‹¤
   - [ ] @Bean μ• λ…Έν…μ΄μ…μ΄ λ¶™μ€ λ©”μ„λ“μ λ¦¬ν„΄νƒ€μ…μ„ λΉμΌλ΅ λ§λ“ λ‹¤
   - [ ] ConfigurationBeanScanner λ¥Ό κµ¬ν„ν•μ—¬ μ£Όμ…ν•΄μ•Όν•  μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν΄λμ¤λ“¤μ„ μ¤μΊ”ν•λ‹¤
   - [ ] Method μ •λ³΄λ¥Ό λ©¤λ²„λ³€μλ΅ κ°€μ§€λ” BeanDefinition κµ¬ν„μ²΄λ¥Ό λ§λ“ λ‹¤ 
4. λ¦¬ν©ν„°λ§
   - [x] BeanDefinitionRegistry κµ¬ν„μ²΄λ¥Ό λ§λ“¤μ–΄μ„ BeanDefinition κ°μ²΄λ¥Ό λ“±λ΅, μ΅°ν ν•  μ μλ„λ΅ ν•λ‹¤